<!DOCTYPE html>
<html>
<head>
  <meta charset=utf-8 />
  <title>  Setting Context - The Actor |  Tangoe Mobile Procurement API </title>  

  <script src="http://localhost:4000/js/jquery/jquery-2.1.4.min.js"></script>
  
  <link rel="stylesheet" href="http://localhost:4000/css/tgUI-style.0.2.8.min.css" />  
  <link rel="stylesheet" href="http://localhost:4000/css/styles-syntax.css">
  <link rel="stylesheet" href="http://localhost:4000/css/styles.css" />

</head>
<body>
 
  <div id="tg-shellMain">

    <header class="dc-banner">
     <div class="tg-display--table  tg-one-whole  tg-pad--half">
      <div class="tg-display--table-cell"  style="width:150px; padding-top: 4px">
        <a href="http://localhost:4000/"><img src="http://www.tangoe.com/wp-content/themes/tangoe/images/tangoe_150x56.png" alt="Tangoe" class="dc-logo" /></a>
      </div><!--
    --><div class="tg-display--table-cell  tg-text--left  tg-valign--top">Mobile Procurement REST API v1</div>
     </div>

     <div class="dc-banner--royal  tg-text--right  tg-pad--right">
        <div class="dc-bannerLinks">
          <a href="https://anypoint.mulesoft.com/apiplatform/tangoe#/portals" target="_blank" class="dc-bannerLink">Developer Portal - Log In</a>
        </div>
      </div>
    </header>

 


<div class="dc-page" style="padding-top:0px">
   
  <!-- tgUI grid version -->
  <div class="dc-pageLayout">
    <div class="dc-pageLayout_cell--nav  tg-one-fifth  tg-pad--quarter--left">

      <nav role="navigation" class="dc-navPanel">
      
        
        

        <div class="dc-navOption  dc-navOption__top">
        
          <a href="http://localhost:4000/">Home</a>
        
         
          

            
         
        </div>
      
        
        

        <div class="dc-navOption  dc-navOption__top">
        
          <a href="http://localhost:4000/start/register/">Getting Started</a>
        
         
          
                          
              

              <div class="dc-navOption  dc-navOption__subone">
              
              <a href="http://localhost:4000/start/register/">Register your App</a>
              
              </div>


            


              
                          
              

              <div class="dc-navOption  dc-navOption__subone">
              
              <a href="http://localhost:4000/start/first-call/">Make your First Call in Minutes</a>
              
              </div>


            


              
                          
              

              <div class="dc-navOption  dc-navOption__subone">
              
              <a href="http://localhost:4000/start/explore/">Test and Explore</a>
              
              </div>


            


              
            
          

            
         
        </div>
      
        
        

        <div class="dc-navOption  dc-navOption__top">
        
          <a href="http://localhost:4000/concepts/security/">Using the API</a>
        
         
          
                          
              

              <div class="dc-navOption  dc-navOption__subone">
              
              <a href="http://localhost:4000/concepts/errors/">Errors</a>
              
              </div>


            


              
                          
              

              <div class="dc-navOption  dc-navOption__subone">
              
              <a href="http://localhost:4000/concepts/metadata/">Metadata</a>
              
              </div>


            


              
                          
              

              <div class="dc-navOption  dc-navOption__subone">
              
              <a href="http://localhost:4000/concepts/pagination/">Pagination</a>
              
              </div>


            


              
                          
              

              <div class="dc-navOption  dc-navOption__subone">
              
              <a href="http://localhost:4000/concepts/headers/">Request Headers</a>
              
              </div>


            


              
                          
              

              <div class="dc-navOption  dc-navOption__subone">
              
              <a href="http://localhost:4000/concepts/actor/" class="dc-navOption__active">Setting Context ('the Actor')</a>
              
              </div>


            


              
                          
              

              <div class="dc-navOption  dc-navOption__subone">
              
              <a href="http://localhost:4000/concepts/uriparameters/">URI Parameters</a>
              
              </div>


            


              
                          
              

              <div class="dc-navOption  dc-navOption__subone">
              
              <a href="http://localhost:4000/concepts/glossary/">Glossary of Terms</a>
              
              </div>


            


              
            
          

            
         
        </div>
      
        
        

        <div class="dc-navOption  dc-navOption__top">
        
          <a href="http://localhost:4000/tutorials/orders/">Tutorials</a>
        
         
          
                          
              

              <div class="dc-navOption  dc-navOption__subone">
              
              <a href="http://localhost:4000/tutorials/orders/">Submitting an Order</a>
              
              </div>


            


              
                          
              

              <div class="dc-navOption  dc-navOption__subone">
              
              <a href="http://localhost:4000/tutorials/orders/new_activation/">&nbsp;&nbsp;&nbsp;&nbsp;  NEW_ACTIVATION</a>
              
              </div>


            


              
                          
              

              <div class="dc-navOption  dc-navOption__subone">
              
              <a href="http://localhost:4000/tutorials/orders/upgrade/">&nbsp;&nbsp;&nbsp;&nbsp;  UPGRADE</a>
              
              </div>


            


              
                          
              

              <div class="dc-navOption  dc-navOption__subone">
              
              <a href="http://localhost:4000/tutorials/orders/port_number/">&nbsp;&nbsp;&nbsp;&nbsp;  PORT_NUMBER</a>
              
              </div>


            


              
                          
              

              <div class="dc-navOption  dc-navOption__subone">
              
              <a href="http://localhost:4000/tutorials/orders/order_accessories/">&nbsp;&nbsp;&nbsp;&nbsp;  ORDER_ACCESSORIES</a>
              
              </div>


            


              
                          
              

              <div class="dc-navOption  dc-navOption__subone">
              
              <a href="http://localhost:4000/tutorials/orders/suspend/">&nbsp;&nbsp;&nbsp;&nbsp;  SUSPEND</a>
              
              </div>


            


              
                          
              

              <div class="dc-navOption  dc-navOption__subone">
              
              <a href="http://localhost:4000/tutorials/orders/unsuspend/">&nbsp;&nbsp;&nbsp;&nbsp;  UNSUSPEND</a>
              
              </div>


            


              
                          
              

              <div class="dc-navOption  dc-navOption__subone">
              
              <a href="http://localhost:4000/tutorials/orders/deactivate/">&nbsp;&nbsp;&nbsp;&nbsp;  DEACTIVATE</a>
              
              </div>


            


              
                          
              

              <div class="dc-navOption  dc-navOption__subone">
              
              <a href="http://localhost:4000/tutorials/orders/update_features/">&nbsp;&nbsp;&nbsp;&nbsp;  UPDATE_FEATURES</a>
              
              </div>


            


              
                          
              

              <div class="dc-navOption  dc-navOption__subone">
              
              <a href="http://localhost:4000/tutorials/orders/swap_devices/">&nbsp;&nbsp;&nbsp;&nbsp;  SWAP_DEVICES</a>
              
              </div>


            


              
                          
              

              <div class="dc-navOption  dc-navOption__subone">
              
              <a href="http://localhost:4000/tutorials/properties/">Obtaining Order Properties</a>
              
              </div>


            


              
                          
              

              <div class="dc-navOption  dc-navOption__subone">
              
              <a href="http://localhost:4000/tutorials/states/">Lists of States and Provinces</a>
              
              </div>


            


              
                          
              

              <div class="dc-navOption  dc-navOption__subone">
              
              <a href="http://localhost:4000/tutorials/addresses/">Formatting an Address</a>
              
              </div>


            


              
            
          

            
         
        </div>
      
        
        

        <div class="dc-navOption  dc-navOption__top">
        
          <a href="http://localhost:4000/policies/versioning/">Policies</a>
        
         
          
                          
              

              <div class="dc-navOption  dc-navOption__subone">
              
              <a href="http://localhost:4000/policies/versioning/">Versioning Policy</a>
              
              </div>


            


              
            
          

            
         
        </div>
      
        
        

        <div class="dc-navOption  dc-navOption__top">
        
          <a href="http://localhost:4000/contact/">Contact</a>
        
         
          

            
         
        </div>
      
      </nav> 

    </div><!--
    --><div class="tg-grid__cell  tg-four-fifths  tg-pad"> 

      <h1 id="setting-context-the-actor">Setting Context (“the Actor”)</h1>
<p>Every API response must only include data that the authenticated user is authorized to view. Even when an API call is being made on the behalf of a different user, at no time should the API ever return data that the authenticated user is not authorized to see.</p>

<p>The one on whose behalf the API call is being made is considered the context for the API call. In the most simple case, this context is the authenticated user. However, sometimes it is desirable to change the user context (or limit the data returned) for one of two reasons:</p>

<ul>
  <li>
    <p><strong>Acting upon behalf of someone else.</strong> One common example of this involves the use of a service account to authenticate for all API calls. The service account may be used, but the API call is really being placed for the benefit of a particular end user. Therefore, this end user is the real context. For example, a call to obtain a device catalog returns the list of devices that the end user is authorized to see, not the list that the service account may access (which might be all devices). <a href="http://localhost:4000/concepts/headers/">Request headers</a> are used for this purpose.</p>
  </li>
  <li>
    <p><strong>Showing a subset of data that is relevant to a specific user in your hierarchy.</strong> For example, a manager might want a list of devices assigned to a specific employee within the department that he/she manages. In this case, we need to utilize a filter to obtain a subset of the total devices that would have been returned otherwise (i.e., without the filter). Query parameters are used for this purpose.</p>
  </li>
</ul>

<p><br /></p>

<h2 id="employee-id-vs-company-employee-id">Employee ID vs. Company Employee ID</h2>

<p>Before we can properly understand the difference between context and filtering, it is important to first know the difference between employee IDs and <em>company</em> employee IDs.</p>

<p>An employee ID is a GUID that is used to identify a specific employee and is generated by the Tangoe backend system (e.g., Command). The company employee ID identifies this same employee but instead the identifier is generated outside of the Tangoe backend system and can come in a variety of formats (e.g., number, email address, name, etc.). Although it is expected to be unique, Tangoe cannot guarantee its uniqueness since it is supplied by the customer. Therefore, the employee ID is always considered more reliable.</p>

<p>Whenever one of these identifiers is passed, either via headers or query parameters, it is important to know that the backend system will always check for the employee ID first. If one is NOT found, then the backend system will look to see if a company employee ID was passed and set the context to that. If neither was passed, then the backend system will set the context to the authenticated user.</p>

<p><br /></p>

<h2 id="context">Context</h2>

<p>The default context of every API call is assumed to be the logged in user. Therefore, the API calls will only return data that this authenticated user has been authorized to access. Often this is the behavior that the user intended.</p>

<p>However, sometimes an API user may wish to execute a call on behalf of someone else. For example, an administrator might need to locate the device asset record in order to deactivate a phone that an employee has lost. In such case, the context of the API call is not the logged in user, but rather someone else whose data the administrator is authorized to access.</p>

<p>Changing the context is accomplished via adding a header to the request that is set to either a Tangoe-generated ID (i.e., employee ID) or a third-party-generated ID (i.e., company employee ID). Specifically, these two headers are:</p>

<ul>
  <li><a href="http://localhost:4000/concepts/headers/">X-TNGO-CONTEXT-EMPLOYEEID</a></li>
  <li><a href="http://localhost:4000/concepts/headers/">X-TNGO-CONTEXT-COMPANYEMPLOYEEID</a></li>
</ul>

<p>API resources that might require changing the context include:</p>

<ul>
  <li>/catalog/devices</li>
  <li>/catalog/plans</li>
  <li>/catalog/accessories</li>
  <li>/regions</li>
  <li>/orders (HTTP POST method only)</li>
</ul>

<p><br /></p>

<h2 id="me">/me</h2>

<p>Sometimes it is helpful to retrieve additional details beyond the ID to identify the user to whom the context is set. The <strong>/me</strong> endpoint returns these details about the API caller and what they are able to procure. This information includes the identity of the authenticated user (i.e., logged in user), as well as the identity of the user on whose behalf the API is being called (commonly known as “the actor”). If the authenticated user is not a service account, these two users will often be the same person. In addition, the response also includes a list of the order transaction types that the actor is authorized to perform.</p>

<p><br /></p>

<h2 id="filters">Filters</h2>

<p>Often setting the default context to the current end user makes sense since they are one using the API to place an order on their own behalf or view information about assets assigned to themselves.  However, sometimes the user does not want to see every data record that he/she is authorized to see. For example,a manager may wish to only see the devices that his/her employee may order. This case calls for use of the employee filter.</p>

<p>The employee filter is set via one of two query parameters:</p>

<ul>
  <li>employee</li>
  <li>companyEmployeeId</li>
</ul>

<p>The API resources that support the employee filter include:</p>

<ul>
  <li>/assets/devices</li>
  <li>/assets/services</li>
  <li>/orders (HTTP GET method)</li>
  <li>/employees</li>
</ul>



    </div>
  </div>  
</div>  
 
    
    <footer class="dc-footer">
      <p class="">&copy; Copyright 2016 Tangoe  | <a href="http://www.tangoe.com/company" target="_blank">About Tangoe</a> | <a href="https://www.tangoe.com/privacy-policy/" target="_blank">Privacy Policy</a></p>
    </footer> 
  </div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-74715760-1', 'auto');
  ga('send', 'pageview');
</script>
  
</body>
</html>